<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ¯æ—¥ä¸€æ‘‡ä¸Šä¸Šå‰</title>
    
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- å¼•å…¥ React å’Œ ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- å¼•å…¥ Babel ç”¨äºç¼–è¯‘ JSX -->
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <!-- å¼•å…¥ä¸­æ–‡å­—ä½“ -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700;900&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f3f4f6;
            margin: 0;
            padding: 0;
            overscroll-behavior: none; /* é˜²æ­¢ä¸‹æ‹‰åˆ·æ–°å¹²æ‰° */
        }
        
        .writing-vertical {
            writing-mode: vertical-rl;
            text-orientation: upright;
            letter-spacing: 0.1em;
        }

        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* åŠ¨ç”»å®šä¹‰ */
        @keyframes float { 
            0%, 100% { transform: translateY(0); } 
            50% { transform: translateY(-10px); } 
        }
        @keyframes shake { 
            0% { transform: rotate(0deg); } 
            25% { transform: rotate(5deg); } 
            50% { transform: rotate(0deg); } 
            75% { transform: rotate(-5deg); } 
            100% { transform: rotate(0deg); } 
        }
        @keyframes stickMove { 
            0%, 100% { transform: translateY(0); } 
            50% { transform: translateY(-15px); } 
        }
        @keyframes fade-in { 
            from { opacity: 0; } 
            to { opacity: 1; } 
        }
        @keyframes scale-up { 
            from { transform: scale(0.9); opacity: 0; } 
            to { transform: scale(1); opacity: 1; } 
        }
        
        /* æŒ‰é’®æµå…‰æ“¦äº®åŠ¨ç”» */
        @keyframes shine-sweep {
            0% { left: -100%; opacity: 0; }
            20% { left: 100%; opacity: 1; }
            100% { left: 100%; opacity: 0; }
        }
        .btn-shine {
            position: relative;
            overflow: hidden;
        }
        .btn-shine::after {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 60%;
            height: 100%;
            background: linear-gradient(to right, transparent, rgba(255,255,255,0.6), transparent);
            transform: skewX(-25deg);
            animation: shine-sweep 3s infinite;
        }

        /* å‡ºç­¾åŠ¨ç”» */
        @keyframes reveal-stick {
            0% { transform: translateY(80px) scale(0.5); opacity: 0; }
            100% { transform: translateY(-60px) scale(1.3); opacity: 1; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- å›¾æ ‡ç»„ä»¶ ---
        const Gift = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="8" width="18" height="4" rx="1"/><path d="M12 8v13"/><path d="M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"/><path d="M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5"/></svg>;
        const User = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>;
        const ChevronRight = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m9 18 6-6-6-6"/></svg>;
        const Heart = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/></svg>;
        const X = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"/><path d="m6 6 18 18"/></svg>;
        const Star = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>;
        const Shield = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>;
        const ThumbsUp = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M7 10v12"/><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z"/></svg>;
        const Medal = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15"/><path d="M11 12 5.12 2.2"/><path d="m13 12 5.88-9.8"/><path d="M8 7h8"/><circle cx="12" cy="17" r="5"/><path d="M12 18v-2h-.5"/></svg>;
        const MapPin = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg>;
        const Briefcase = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="20" height="14" x="2" y="7" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>;
        const ImageIcon = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>;
        const MessageCircle = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"/></svg>;
        const ShoppingBag = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>;
        const Users = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>;
        const WechatIcon = (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17 10C17 14 14 17 10 17C9.3 17 8.7 16.9 8.1 16.7L5 18L5.7 15.2C4 14 3 12.1 3 10C3 6 6.1 3 10 3C13.9 3 17 6 17 10Z"/><path d="M21 15C21 17.8 18.8 20 16 20C15.6 20 15.2 20 14.8 19.9L13 21L13.4 19.2C12.5 18.9 11.7 18.4 11.2 17.8C11.1 17.5 11 17.3 11 17C11 14.2 13.2 12 16 12C18.8 12 21 14.2 21 15Z"/></svg>;

        // --- æ•°æ®é…ç½® ---
        const RECOMMENDED_WORKERS = [
          { 
            id: 101, 
            name: 'åˆ˜é˜¿å§¨', 
            role: 'é‡‘ç‰Œæ”¶çº³å¸ˆ', 
            avatarUrl: 'https://i.pravatar.cc/150?img=5',
            distance: '0.3km',
            skills: ['å…¨å±‹æ”¶çº³', 'ç©ºé—´è§„åˆ’'],
            servedCount: 520,
            recommendCount: 188,
            statsText: 'å·²æœåŠ¡520+æˆ·', 
            desc: 'æ·±è€•æœ¬ç¤¾åŒº2å¹´ï¼Œæ“…é•¿ç©ºé—´æ‰©å®¹ï¼Œè®©æ‚¨çš„å®¶å¤šå‡ºä¸€é—´æˆ¿ã€‚',
            experience: '5å¹´å®¶æ”¿ç»éªŒï¼Œ2å¹´ä¸“æ³¨æ”¶çº³æ•´ç†ï¼Œæ›¾æœåŠ¡è¿‡300+å®¶åº­ã€‚',
            cases: ['å®¢å…æ”¶çº³å¯¹æ¯”', 'å„¿ç«¥æˆ¿æ•´ç†', 'è¡£æ©±æ¢å­£']
          },
          { 
            id: 102, 
            name: 'å¼ å¸ˆå‚…', 
            role: 'æ°´ç”µæ€¥ä¿®', 
            avatarUrl: 'https://i.pravatar.cc/150?img=11',
            distance: '0.6km', 
            skills: ['ç”µè·¯æ£€ä¿®', 'å«æµ´å®‰è£…'],
            servedCount: 1350,
            recommendCount: 456,
            statsText: 'ç´¯è®¡æ€¥ä¿®1350æ¬¡',
            desc: 'å°åŒºé‡Œçš„â€œå…¨èƒ½æ•‘ç«å‘˜â€ï¼Œ5åˆ†é’Ÿå“åº”ï¼Œå®ˆæŠ¤ç”¨ç”µç”¨æ°´å®‰å…¨ã€‚',
            experience: '15å¹´æ°´ç”µå·¥ç»éªŒï¼ŒæŒè¯ä¸Šå²—ï¼Œç»´ä¿®é›¶å·®è¯„ã€‚',
            cases: ['åŠå¤œçˆ†ç®¡æŠ¢ä¿®', 'å…¨å±‹ç”µè·¯æ”¹é€ ', 'æ™ºèƒ½é©¬æ¡¶å®‰è£…']
          },
          { 
            id: 103, 
            name: 'å°ç‹', 
            role: 'ä»£é›ç‹—/å–‚çŒ«', 
            avatarUrl: 'https://i.pravatar.cc/150?img=33',
            distance: '0.1km', 
            skills: ['å® ç‰©é™ªæŠ¤', 'ç»è‚²æ¥é€'],
            servedCount: 600,
            recommendCount: 230,
            desc: 'èµ„æ·±é“²å±å®˜ï¼Œæ˜¥èŠ‚/å‡æœŸä¸Šé—¨å–‚å…»ï¼Œæ¯›å­©å­äº¤ç»™æˆ‘è¯·æ”¾å¿ƒã€‚',
            experience: '3å¹´å® ç‰©åº—å·¥ä½œç»éªŒï¼Œæ‡‚å® ç‰©æ€¥æ•‘ï¼Œæœ‰çˆ±å¿ƒæœ‰è€å¿ƒã€‚',
            cases: ['æ˜¥èŠ‚ä¸Šé—¨å–‚çŒ«', 'å¤§å‹çŠ¬ä»£é›', 'ç”Ÿç—…é€åŒ»é™ªæŠ¤']
          }
        ];

        const GOLD_PROVIDERS = [
          { id: 1, name: 'å¼ é˜¿å§¨', role: 'é‡‘ç‰Œä¿æ´', avatarUrl: 'https://i.pravatar.cc/150?img=5', skills: ['æ·±åº¦æ¸…æ´', 'æ”¶çº³'], rating: '5.0', reviews: 128, blessingsSent: 1205, experience: '8å¹´ä¿æ´ç»éªŒ', cases: ['æ·±åº¦ä¿æ´', 'å¼€è’æ¸…æ´'] },
          { id: 2, name: 'ç‹å¸ˆå‚…', role: 'ç»´ä¿®å¤§ç¥', avatarUrl: 'https://i.pravatar.cc/150?img=11', skills: ['æ°´ç”µæ€¥ä¿®', 'å®¶ç”µæ¸…æ´—'], rating: '4.9', reviews: 342, blessingsSent: 893, experience: '20å¹´ç»´ä¿®è€å¸ˆå‚…', cases: ['ç©ºè°ƒæ¸…æ´—', 'ç®¡é“ç–é€š'] },
          { id: 3, name: 'èµµå°å“¥', role: 'æé€Ÿè·‘è…¿', avatarUrl: 'https://i.pravatar.cc/150?img=33', skills: ['åŒåŸæ€¥é€', 'ä»£ä¹°'], rating: '5.0', reviews: 890, blessingsSent: 2100, experience: '3å¹´å…¨åŸè·‘è…¿', cases: ['æ€¥é€æ–‡ä»¶', 'æ’é˜ŸæŒ‚å·'] },
          { id: 4, name: 'è€é™ˆ', role: 'ç¤¾åŒºæ¨å¹¿', avatarUrl: 'https://i.pravatar.cc/150?img=68', skills: ['å…¼èŒè¾¾äºº', 'åœ°æ¨'], rating: '4.8', reviews: 56, blessingsSent: 0, experience: 'é€€ä¼‘è¿”è˜ï¼Œç¤¾åŒºæ´»åœ°å›¾', cases: ['åœ°æ¨å®£ä¼ ', 'ä¿¡æ¯æ”¶é›†'] },
          { id: 5, name: 'æå¤§å¨', role: 'ä¸Šé—¨åšé¥­', avatarUrl: 'https://i.pravatar.cc/150?img=53', skills: ['å·æ¹˜èœ', 'å®¶å®´'], rating: '5.0', reviews: 210, blessingsSent: 666, experience: 'å‰é¥­åº—ä¸»å¨', cases: ['å¹´å¤œé¥­', 'ç”Ÿæ—¥å®´'] },
        ];

        const DATA_CONFIG = {
          koi: {
            type: 'koi',
            title: 'ã€ä¸Šä¸Šå‰ Â· é”¦é²¤ç­¾ã€‘',
            stamp: 'å…¨å“ç±»å…å•',
            actorName: 'ç¤¾åŒºç»´ä¿®å¤§ç¥ Â· ç‹å¸ˆå‚…',
            actorRole: 'é‡‘ç‰Œç»´ä¿®',
            actorAvatarColor: 'bg-yellow-500',
            speech: 'é”¦é²¤é™„ä½“ï¼Œä¸‡äº‹å¤§å‰ï¼ç”Ÿæ´»é‡Œçš„é‚£äº›å°éº»çƒ¦ï¼Œä»Šå¤©ç»Ÿç»Ÿç”±æˆ‘æ¥ä¹°å•ã€‚æ„¿è¿™ä»½ä»å¤©è€Œé™çš„æƒŠå–œï¼Œèƒ½æ¢æ‚¨ä¸€å¤©çš„å¥½å¿ƒæƒ…ï¼ï¼ˆå…¨å“ç±»é€šç”¨ï¼Œæ— ä¸Šé™ï¼‰',
            buttons: [
              { text: 'ğŸ‰ å“‡ï¼å»æŒ‘é€‰ç¥ç¦', action: 'gold_list', primary: true },
              { text: 'ç‚«è€€ä¸€ä¸‹', action: 'share', primary: false }
            ],
            profileData: { distance: '1.2km' },
            stickText: 'å…å•', 
            stickColor: 'bg-[#FFD700]', 
            stickBorder: 'border-yellow-700'
          },
          redPacketScenarios: [
            {
              id: 'A',
              type: 'red_packet',
              title: 'ã€å®œ Â· ç”©æ‰‹æŒæŸœã€‘',
              hasRedPacket: true,
              amount: '0.28',
              actorName: 'é‡‘ç‰Œä¿æ´ Â· å¼ é˜¿å§¨',
              actorRole: 'çƒ­å¿ƒè‚ é˜¿å§¨',
              actorAvatarColor: 'bg-pink-500',
              speech: 'æŠŠæ—¶é—´æµªè´¹åœ¨ç¾å¥½çš„äº‹ç‰©ä¸Šï¼Œæ‰ä¸ç®—è™šåº¦ã€‚æ„¿æ‚¨çš„ç”Ÿæ´»çª—æ˜å‡ å‡€ï¼Œå¿ƒä¸­æ— å°˜ã€‚è¿™ç‚¹å°å°å¿ƒæ„è¯·æ”¶ä¸‹ï¼Œæ„¿æ‚¨å“ªæ€•å·å¾—åŠæ—¥é—²ï¼Œä¹Ÿæ˜¯å²æœˆé™å¥½ã€‚',
              buttons: [{ text: 'çœ‹çœ‹ç¤¾åŒºè°åœ¨é€ç¥ç¦', action: 'gold_list', primary: true }],
              stickText: 'ç°é‡‘çº¢åŒ…',
              stickColor: 'bg-red-500',
              stickBorder: 'border-red-800'
            },
          ],
          blessings: [
            {
              id: 'D',
              type: 'blessing', 
              title: 'ã€è´¢è¿ Â· çˆ†æ£šã€‘',
              hasRedPacket: false,
              actorName: 'ç¤¾åŒºåˆä¼™äºº Â· è€é™ˆ',
              actorRole: 'å‡¡å°”èµ›é‚»å±…',
              actorAvatarColor: 'bg-green-600',
              speech: 'ä¸å…¶è½¬å‘é”¦é²¤ï¼Œä¸å¦‚è‡ªå·±åšé”¦é²¤ï¼ç¤¾åŒºçš„å¼ é˜¿å§¨ä¸Šä¸ªæœˆåˆ©ç”¨ç©ºé—²æ—¶é—´æ¥å•ï¼Œèµšäº† 1280 å…ƒã€‚ç°åœ¨æ¥â€˜é‚»å·¥å­£â€™æå‰¯ä¸šï¼Œä¸ä»…èƒ½åˆ›æ”¶ï¼Œè¿˜èƒ½é¢†æ–°æ˜¥ä¸“å±çº¢åŒ…ï¼Œä½ è¦ä¸è¦ä¹Ÿæ¥è¯•è¯•ï¼Ÿ',
              buttons: [{ text: 'å»é‚»å·¥å­£çœ‹çœ‹', action: 'visit_job_season', primary: true }],
              stickText: 'é©¬ä¸ŠåŠ è–ª',
              stickColor: 'bg-yellow-200', 
              stickBorder: 'border-yellow-700'
            },
            {
              id: 'E',
              type: 'blessing',
              title: 'ã€ä¸Šä¸Šç­¾ Â· å¹³å®‰ã€‘',
              hasRedPacket: false,
              actorName: 'ç¤¾åŒºä¿å®‰ Â· è€å¼ ',
              actorRole: 'å®‰å…¨å«å£«',
              actorAvatarColor: 'bg-indigo-600',
              speech: 'ä¸ç®¡å¤šæ™šå›å®¶ï¼Œå°åŒºçš„ç¯æˆ‘éƒ½ä¸ºä½ ç•™ç€ã€‚å‡ºå…¥å¹³å®‰ï¼Œå°±æ˜¯æœ€å¤§çš„ç¦æ°”ã€‚',
              buttons: [{ text: 'ç»™ä»–ç‚¹ä¸ªèµ', action: 'like', primary: true }],
              stickText: 'ä¸Šä¸Šç­¾', 
              stickColor: 'bg-yellow-200',
              stickBorder: 'border-yellow-700'
            },
            {
              id: 'F',
              type: 'blessing',
              title: 'ã€ä¸Šä¸Šç­¾ Â· æš–èƒƒã€‘',
              hasRedPacket: false,
              actorName: 'å¤–å–å°å“¥ Â· å°æ',
              actorRole: 'åŸå¸‚éª‘å£«',
              actorAvatarColor: 'bg-orange-500',
              speech: 'å¿™å½’å¿™ï¼Œåˆ«å¿˜äº†ä¸€æ—¥ä¸‰é¤ã€‚æŒ‰æ—¶åƒé¥­ï¼Œèº«ä½“æ‰æ˜¯é©å‘½çš„æœ¬é’±ã€‚',
              buttons: [{ text: 'ç»™ä»–ç‚¹ä¸ªèµ', action: 'like', primary: true }],
              stickText: 'é©¬åˆ°æˆåŠŸ', 
              stickColor: 'bg-yellow-200',
              stickBorder: 'border-yellow-700'
            }
          ]
        };

        const MARQUEE_DATA = [
          "æ­å–œ 138****1234 æŠ½ä¸­ã€å…¨å“ç±»å…å•ã€‘ï¼Œç‹å¸ˆå‚…ä¹°å•ï¼",
          "æ­å–œ 159****9876 åˆšåˆšæç° 0.88 å…ƒçº¢åŒ…ï¼",
          "æ­å–œ 186****5678 è·å¾— 50å…ƒ ç»´ä¿®åŸºé‡‘ï¼"
        ];

        const FIREWORKS = Array.from({ length: 15 }).map((_, i) => ({
          id: i,
          left: `${Math.random() * 100}%`,
          top: `${Math.random() * 100}%`,
          delay: `${Math.random() * 2}s`,
          color: ['bg-yellow-400', 'bg-red-500', 'bg-orange-400'][Math.floor(Math.random() * 3)]
        }));

        function DailyShakeAppV2() {
          const [viewState, setViewState] = useState('home'); // home, shaking, revealing, modal_*, page_*
          const [shakeResult, setShakeResult] = useState(null);
          const [showShareModal, setShowShareModal] = useState(false);
          const [showSurprise, setShowSurprise] = useState(false);
          const [marqueeIndex, setMarqueeIndex] = useState(0);
          const [shakeCount, setShakeCount] = useState(3);
          const [toastMessage, setToastMessage] = useState(null);

          useEffect(() => {
            const interval = setInterval(() => {
              setMarqueeIndex((prev) => (prev + 1) % MARQUEE_DATA.length);
            }, 3000);
            return () => clearInterval(interval);
          }, []);

          const showToast = (msg) => {
            setToastMessage(msg);
            setTimeout(() => setToastMessage(null), 2000);
          };

          const handleShake = () => {
            if (shakeCount <= 0) {
                showToast("ä»Šæ—¥æ¬¡æ•°å·²ç”¨å®Œï¼Œè¯·åˆ†äº«ç»™å¥½å‹ï¼");
                return;
            }
            setViewState('shaking');
            
            setTimeout(() => {
              setShakeCount(prev => prev - 1);
              
              const rand = Math.random();
              let result;
              
              if (rand < 0.1) {
                result = DATA_CONFIG.koi;
              } else if (rand < 0.5) {
                const scenarios = DATA_CONFIG.redPacketScenarios;
                result = scenarios[Math.floor(Math.random() * scenarios.length)];
              } else {
                const blessings = DATA_CONFIG.blessings;
                result = blessings[Math.floor(Math.random() * blessings.length)];
              }
              
              setShakeResult(result);
              setViewState('revealing');

              setTimeout(() => {
                  if (result.type === 'koi' || result.type === 'red_packet') {
                      setViewState('modal_redpacket');
                  } else {
                      setViewState('modal_result');
                  }
              }, 1200);

            }, 1500);
          };

          const handleOpenRedPacket = () => {
            setViewState('modal_result');
          };

          const handleCloseModal = () => {
            setViewState('home');
          };

          const handleCloseShareModal = () => {
            setShowShareModal(false);
            if (Math.random() > 0.5) {
                setTimeout(() => {
                    setShowSurprise(true);
                }, 1000);
            }
          };

          const handleResultAction = (action) => {
            if (action === 'gold_list') {
              setViewState('page_gold_list');
            } else if (action === 'share') {
              setShowShareModal(true);
            } else if (action === 'like') {
              showToast("ç‚¹èµæˆåŠŸï¼æ„Ÿè°¢æ‚¨çš„é¼“åŠ± â¤ï¸");
              setTimeout(() => {
                setViewState('home');
              }, 1500);
            } else if (action === 'visit_job_season') {
              // å¤„ç†å»é‚»å·¥å­£çš„é€»è¾‘
              showToast("æ­£åœ¨å‰å¾€é‚»å·¥å­£...");
              // å®é™…å¼€å‘ä¸­è¿™é‡Œä¼šåšè·³è½¬
            }
          };

          const handleCardClick = (worker) => {
            setShakeResult({
              actorName: worker.name,
              actorRole: worker.role,
              actorAvatarColor: worker.avatarColor,
              avatarUrl: worker.avatarUrl,
              profileData: {
                 distance: worker.distance || '0.5km',
                 skills: worker.skills,
                 review: "éå¸¸ä¸“ä¸šï¼ŒæœåŠ¡æ€åº¦å¥½ï¼", 
                 serviceCount: worker.servedCount || worker.reviews,
                 experience: worker.experience || 'å¤šå¹´ä»ä¸šç»éªŒ',
                 cases: worker.cases || ['æœåŠ¡æ¡ˆä¾‹1', 'æœåŠ¡æ¡ˆä¾‹2']
              }
            });
            setViewState('page_profile');
          };

          const Marquee = () => (
            <div className="bg-black/20 text-white/90 text-xs py-1.5 px-4 rounded-full backdrop-blur-sm inline-flex items-center gap-2 max-w-[90%] overflow-hidden mx-auto mt-2 border border-white/10">
               <span className="w-1.5 h-1.5 rounded-full bg-green-400 animate-pulse"></span>
               <div className="animate-fade-in key={marqueeIndex}">
                 {MARQUEE_DATA[marqueeIndex]}
               </div>
            </div>
          );

          const Toast = () => {
            if (!toastMessage) return null;
            return (
              <div className="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[80] bg-black/80 text-white px-6 py-3 rounded-lg shadow-xl text-sm font-medium animate-fade-in flex items-center gap-2">
                 <ThumbsUp className="w-4 h-4 text-yellow-400" />
                 {toastMessage}
              </div>
            );
          };

          const CloseButton = ({ onClick }) => (
            <button 
                onClick={onClick} 
                className="absolute top-4 right-4 z-50 w-8 h-8 flex items-center justify-center bg-black/30 backdrop-blur-sm text-white rounded-full border border-white/20 hover:bg-black/50 transition-all active:scale-95"
            >
               <X className="w-5 h-5" />
            </button>
          );

          // 1. ä¸»ä¼šåœº
          const renderHome = () => {
            if (viewState === 'page_gold_list' || viewState === 'page_profile') {
                return null;
            }

            return (
                <div className="relative flex flex-col min-h-screen bg-gradient-to-b from-[#D92C2C] to-[#A61B1B] overflow-x-hidden">
                  <div className="pt-2 pb-1 text-center z-20 flex-shrink-0">
                    <h1 className="text-4xl font-black text-[#FFE699] drop-shadow-[0_2px_2px_rgba(0,0,0,0.3)] tracking-wide" style={{ fontFamily: 'serif' }}>
                      æ‘‡å¥½è¿ï¼Œæ‹¿å…å•
                    </h1>
                    <div className="flex items-center justify-center gap-2 mt-1">
                       <div className="h-[1px] w-4 bg-[#FFE699]/50"></div>
                       <p className="text-white text-base font-medium tracking-widest text-shadow">é‚»å·¥é€å¥½ç¤¼ Â· å¤©å¤©ä¸Šä¸Šç­¾</p>
                       <div className="h-[1px] w-4 bg-[#FFE699]/50"></div>
                    </div>
                    <Marquee />
                  </div>

                  {/* äº’åŠ¨åŒºåŸŸ */}
                  <div className="flex-1 relative flex flex-col items-center justify-center z-10 py-4 min-h-[450px] mt-24"> 
                    
                    {/* æ°”æ³¡ */}
                    <div className="absolute inset-0 pointer-events-none">
                       <div className="absolute top-1/4 left-8 animate-[float_3s_ease-in-out_infinite]">
                         <div className="w-16 h-16 rounded-full bg-gradient-to-br from-yellow-200/40 to-yellow-500/10 backdrop-blur-sm border border-yellow-200/50 flex items-center justify-center shadow-lg">
                            <span className="text-yellow-100 font-bold text-xs drop-shadow-md">å…å•</span>
                         </div>
                       </div>
                       <div className="absolute top-1/3 right-6 animate-[float_4s_ease-in-out_infinite_1s]">
                         <div className="w-14 h-14 rounded-full bg-gradient-to-br from-red-200/30 to-red-500/10 backdrop-blur-sm border border-white/30 flex items-center justify-center shadow-lg">
                            <span className="text-white font-bold text-xs drop-shadow-md">ä¸Šä¸Šç­¾</span>
                         </div>
                       </div>
                       <div className="absolute bottom-1/3 left-12 animate-[float_3.5s_ease-in-out_infinite_0.5s]">
                         <div className="w-12 h-12 rounded-full bg-gradient-to-br from-orange-200/30 to-orange-500/10 backdrop-blur-sm border border-orange-200/40 flex items-center justify-center shadow-lg">
                            <span className="text-orange-100 font-bold text-[10px] drop-shadow-md">ç°é‡‘çº¢åŒ…</span>
                         </div>
                       </div>
                    </div>

                    {/* æ‘‡ç­¾ä¸»ä½“ */}
                    <div className={`relative mt-4 cursor-pointer transition-transform ${viewState === 'shaking' ? 'animate-[shake_0.8s_ease-in-out_infinite]' : ''}`} onClick={handleShake}>
                       
                       {/* å‡ºç­¾å±•ç¤ºåŠ¨ç”» */}
                       {viewState === 'revealing' && shakeResult && (
                           <div className="absolute left-1/2 -translate-x-1/2 -top-20 z-20 animate-[reveal-stick_0.5s_ease-out_forwards]">
                               <div className={`w-10 h-48 ${shakeResult.stickColor || 'bg-yellow-200'} rounded-t-md border-2 ${shakeResult.stickBorder || 'border-yellow-700'} shadow-xl flex items-start justify-center pt-4`}>
                                    <span className={`text-lg ${shakeResult.stickColor === 'bg-red-500' ? 'text-yellow-100' : 'text-red-900'} font-black writing-vertical tracking-widest`}>{shakeResult.stickText}</span>
                               </div>
                           </div>
                       )}

                       <div className="absolute -inset-10 bg-yellow-500/20 blur-2xl rounded-full"></div>
                       
                       <div className="w-36 h-48 bg-gradient-to-r from-yellow-700 via-yellow-500 to-yellow-800 rounded-b-3xl rounded-t-lg border-x-2 border-b-4 border-yellow-900 shadow-2xl relative z-20 flex justify-center overflow-hidden">
                          <div className="absolute top-8 w-full h-1 bg-yellow-900/30"></div>
                          <div className="absolute bottom-8 w-full h-1 bg-yellow-900/30"></div>
                          <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/wood-pattern.png')] opacity-30 mix-blend-overlay"></div>
                          <div className="mt-14 w-14 h-14 bg-red-700/90 rounded-full flex items-center justify-center border-2 border-yellow-300 shadow-inner">
                             <span className="text-2xl font-serif text-yellow-100 font-bold">å‰</span>
                          </div>
                       </div>

                       {/* ç­¾å­ç¾¤ */}
                       {viewState !== 'revealing' && (
                           <div className="absolute -top-24 left-0 w-full h-full z-10 pointer-events-none">
                              <div className="absolute left-[15%] top-4 transform -rotate-[20deg] origin-bottom">
                                 <div className={`w-8 h-36 bg-yellow-200 rounded-t-md border border-yellow-700 shadow-md flex items-start justify-center pt-2 ${viewState === 'shaking' ? 'animate-[stickMove_0.3s_infinite_0s]' : ''}`}>
                                    <span className="text-sm text-red-800 font-bold writing-vertical">ä¸Šä¸Šç­¾</span>
                                 </div>
                              </div>
                              <div className="absolute left-[30%] top-0 transform -rotate-[10deg] origin-bottom">
                                 <div className={`w-8 h-40 bg-red-500 rounded-t-md border border-red-800 shadow-md flex items-start justify-center pt-2 ${viewState === 'shaking' ? 'animate-[stickMove_0.35s_infinite_0.1s]' : ''}`}>
                                    <span className="text-xs text-yellow-100 font-bold writing-vertical">ç°é‡‘çº¢åŒ…</span>
                                 </div>
                              </div>
                              <div className="absolute left-[45%] -top-4 transform rotate-0 origin-bottom z-10">
                                 <div className={`w-9 h-44 bg-[#FFD700] rounded-t-md border border-yellow-700 shadow-lg flex items-start justify-center pt-2 ${viewState === 'shaking' ? 'animate-[stickMove_0.25s_infinite_0.05s]' : ''}`}>
                                    <span className="text-base text-red-900 font-black writing-vertical tracking-widest">å…å•</span>
                                 </div>
                              </div>
                              <div className="absolute left-[60%] top-0 transform rotate-[10deg] origin-bottom">
                                 <div className={`w-8 h-40 bg-yellow-200 rounded-t-md border border-yellow-700 shadow-md flex items-start justify-center pt-2 ${viewState === 'shaking' ? 'animate-[stickMove_0.33s_infinite_0.15s]' : ''}`}>
                                    <span className="text-xs text-red-800 font-bold writing-vertical">é©¬ä¸ŠåŠ è–ª</span>
                                 </div>
                              </div>
                              <div className="absolute left-[75%] top-4 transform rotate-[20deg] origin-bottom">
                                 <div className={`w-8 h-36 bg-yellow-200 rounded-t-md border border-yellow-700 shadow-md flex items-start justify-center pt-2 ${viewState === 'shaking' ? 'animate-[stickMove_0.28s_infinite_0.2s]' : ''}`}>
                                    <span className="text-sm text-red-800 font-bold writing-vertical">é©¬åˆ°æˆåŠŸ</span>
                                 </div>
                              </div>
                           </div>
                       )}

                       <div className="absolute bottom-4 -left-4 z-30 w-14 h-20 bg-[#f5d0b0] rounded-r-3xl border-l-0 border-2 border-[#e6b89c] rotate-12 shadow-lg"></div>
                       <div className="absolute bottom-4 -right-4 z-30 w-14 h-20 bg-[#f5d0b0] rounded-l-3xl border-r-0 border-2 border-[#e6b89c] -rotate-12 shadow-lg"></div>
                    </div>

                    <div className="mt-8 z-20 flex flex-col items-center">
                      <button 
                         onClick={handleShake}
                         className="btn-shine bg-gradient-to-b from-yellow-300 to-yellow-500 text-red-900 text-xl font-black py-4 px-12 rounded-full shadow-[0_6px_0_#b45309,0_15px_20px_rgba(0,0,0,0.3)] active:shadow-[0_2px_0_#b45309] active:translate-y-1 transition-all border-2 border-yellow-200"
                      >
                         æ‘‡ ä¸€ æ‘‡
                      </button>
                      
                      {/* ä»Šæ—¥æ‘‡ç­¾æ•° + æˆ‘çš„å¥–åŠ± */}
                      <div className="mt-8 flex items-center gap-4">
                          <div className="px-4 h-8 rounded-full bg-black/20 text-[#FFE699] text-xs font-medium backdrop-blur-sm border border-white/10 shadow-sm flex items-center justify-center">
                              ä»Šæ—¥æ‘‡ç­¾æ•°ï¼š<span className="font-bold text-white text-base ml-1">{shakeCount}</span>
                          </div>
                          <div 
                              onClick={() => showToast('æŸ¥çœ‹æˆ‘çš„å¥–åŠ±')}
                              className="px-4 h-8 rounded-full bg-black/20 text-[#FFE699] text-xs font-medium backdrop-blur-sm border border-white/10 shadow-sm flex items-center justify-center gap-1 cursor-pointer active:bg-black/30 transition-colors"
                          >
                              æˆ‘çš„å¥–åŠ± <ChevronRight className="w-3 h-3" />
                          </div>
                      </div>
                    </div>
                  </div>

                  {/* åº•éƒ¨åŠŸèƒ½åŒº */}
                  <div className="bg-white rounded-t-3xl pt-6 pb-8 shadow-[0_-4px_20px_rgba(0,0,0,0.2)] z-30 relative flex flex-col gap-8 w-full mt-auto">
                    
                    {/* 1. ä»»åŠ¡å¡ç‰‡åŒº */}
                    <div className="px-4 flex flex-col gap-4">
                      
                      {/* å‘å¥½è¿ */}
                      <div className="bg-gradient-to-br from-red-50 to-white border border-red-100 rounded-2xl p-4 shadow-sm flex items-center justify-between">
                        <div className="flex flex-col gap-1">
                            <div className="flex items-center gap-2 mb-1">
                                <h3 className="font-bold text-gray-800 text-base flex items-center gap-1">
                                    <Gift className="w-5 h-5 text-red-500 fill-current" />
                                    å¥½è¿æ¥åŠ›
                                </h3>
                                <span className="text-xs text-gray-500">å·²æˆåŠŸä¼ é€’ <span className="text-red-500 font-bold">3</span> äºº</span>
                            </div>
                            <div>
                                <p className="text-sm text-gray-800 font-bold mb-0.5">é€å¥½å‹å¿…ä¸­çº¢åŒ…</p>
                                <p className="text-xs text-red-500 font-medium">è·å¾—å…å•åŠ é€Ÿï¼Œæ›´æœ‰æƒŠå–œç¦åˆ©</p>
                            </div>
                        </div>
                        <button 
                          onClick={() => setShowShareModal(true)}
                          className="bg-red-500 hover:bg-red-600 text-white text-xs font-bold py-2 px-4 rounded-full shadow-lg shadow-red-200 active:scale-95 transition-transform whitespace-nowrap min-w-[80px]"
                        >
                          å‘å¥½è¿
                        </button>
                      </div>

                      {/* åŠ ä¼ä¸šå¾®ä¿¡ */}
                      <div className="bg-gradient-to-br from-blue-50 to-white border border-blue-100 rounded-2xl p-4 shadow-sm flex items-center justify-between">
                        <div className="flex items-center gap-3">
                            <div className="bg-blue-100 p-2.5 rounded-full">
                                <WechatIcon className="w-6 h-6 text-blue-600" />
                            </div>
                            <div>
                                <p className="text-base text-gray-800 font-bold">åŠ ä¼å¾®é¢†ç¦åˆ©</p>
                                <p className="text-xs text-blue-500 font-medium">é¢å¤–æŠ½ç­¾ + ä¸“å±æœåŠ¡</p>
                            </div>
                        </div>
                        <button 
                          onClick={() => showToast('åŠŸèƒ½å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…')}
                          className="bg-blue-600 hover:bg-blue-700 text-white text-xs font-bold py-2 px-4 rounded-full shadow-lg shadow-blue-200 active:scale-95 transition-transform whitespace-nowrap min-w-[80px]"
                        >
                          å»æ·»åŠ 
                        </button>
                      </div>
                    </div>

                    {/* 2. é‚»é‡Œå¸®æ‰‹ Â· æ–°æ˜¥æœåŠ¡ */}
                    <div className="flex flex-col pl-4">
                      <div className="flex items-center justify-between mb-3 pr-4">
                        <h3 className="font-bold text-gray-800 text-base flex items-center gap-1">
                            <Star className="w-5 h-5 text-yellow-500 fill-current" /> 
                            é‚»é‡Œå¸®æ‰‹ Â· æ–°æ˜¥æœåŠ¡
                        </h3>
                        <div 
                            onClick={() => setViewState('page_gold_list')}
                            className="text-xs text-gray-500 flex items-center gap-0.5 cursor-pointer active:opacity-70"
                        >
                            æ›´å¤šé‚»é‡Œå¸®æ‰‹ <ChevronRight className="w-3 h-3" />
                        </div>
                      </div>
                      
                      <div className="flex gap-4 overflow-x-auto pr-4 pb-4 scrollbar-hide">
                        {RECOMMENDED_WORKERS.map(worker => (
                          <div key={worker.id} className="min-w-[240px] w-[240px] bg-white rounded-2xl p-4 shadow-[0_4px_15px_rgba(0,0,0,0.05)] flex flex-col flex-shrink-0 border border-gray-50 relative overflow-hidden">
                             {/* é¡¶éƒ¨è£…é¥°æ¡ */}
                             <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-orange-400 to-red-400"></div>
                             
                             <div className="flex items-start gap-3 mb-3 mt-1">
                                <img src={worker.avatarUrl} alt={worker.name} className="w-12 h-12 rounded-full object-cover border-2 border-white shadow-md flex-shrink-0" />
                                <div className="flex-1 min-w-0">
                                   <div className="flex items-center gap-2 mb-1">
                                      <span className="font-bold text-gray-800 text-base truncate">{worker.name}</span>
                                      <span className="text-[10px] bg-red-50 text-red-600 px-1.5 py-0.5 rounded-md border border-red-100">{worker.role}</span>
                                   </div>
                                   <div className="flex items-center gap-1 text-xs text-gray-400">
                                      <MapPin className="w-3 h-3" />
                                      <span>æœ¬ç¤¾åŒº Â· {worker.distance}</span>
                                   </div>
                                </div>
                             </div>
                             
                             {worker.statsText && (
                                <div className="mb-2">
                                    <span className="inline-block text-[10px] bg-orange-50 text-orange-700 px-2 py-1 rounded-md font-medium border border-orange-100">
                                        ğŸ”¥ {worker.statsText}
                                    </span>
                                </div>
                             )}
                             
                             <p className="text-sm text-gray-600 leading-relaxed mb-4 line-clamp-2">
                                {worker.desc}
                             </p>
                             
                             <div className="mt-auto flex items-center justify-between border-t border-gray-100 pt-3">
                                <span className="text-xs text-gray-400 flex items-center gap-1">
                                   <Heart className="w-3 h-3 text-red-400 fill-current" /> {worker.recommendCount} æ¨è
                                </span>
                                <button 
                                   onClick={() => handleCardClick(worker)}
                                   className="text-xs text-gray-600 font-bold active:opacity-70 flex items-center"
                                >
                                   æŸ¥çœ‹è¯¦æƒ… <ChevronRight className="w-3 h-3" />
                                </button>
                             </div>
                          </div>
                        ))}
                      </div>
                    </div>
                    
                  </div>

                  <div className="absolute inset-0 opacity-10 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-yellow-200 to-transparent pointer-events-none"></div>
                </div>
            );
          }

          // 2. é®ç½©å¼¹çª— - çº¢åŒ…
          const renderModalRedPacket = () => (
            <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm animate-fade-in px-6">
              <div className="w-full max-w-sm relative animate-scale-up">
                 <CloseButton onClick={handleCloseModal} />
                 
                 <div className="bg-[#D92C2C] rounded-2xl overflow-hidden shadow-2xl relative aspect-[3/4] flex flex-col items-center border border-red-500">
                    <div className="absolute -top-20 -left-20 w-60 h-60 bg-red-600 rounded-full blur-3xl opacity-50"></div>
                    
                    <div className="w-[120%] h-[40%] bg-[#c02525] rounded-b-[100%] absolute top-0 shadow-lg z-10 flex justify-center pt-8">
                       <div className={`w-16 h-16 ${shakeResult.actorAvatarColor} rounded-full border-2 border-yellow-200 p-0.5 shadow-md z-20`}>
                         <div className="w-full h-full rounded-full bg-gray-200 flex items-center justify-center overflow-hidden">
                            <User className="text-gray-500 w-10 h-10 mt-2" />
                         </div>
                       </div>
                    </div>

                    <div className="mt-28 flex flex-col items-center z-10 w-full px-6">
                       <h3 className="text-[#FFE699] text-lg font-bold">{shakeResult.actorName}</h3>
                       <p className="text-red-100/80 text-xs mt-1">ç»™æ‚¨å‘äº†ä¸€ä¸ªå¥½è¿çº¢åŒ…</p>
                       
                       <p className="text-[#FFE699] text-2xl font-serif font-bold mt-8 tracking-widest">
                          ç¥æ‚¨è¯¸äº‹é¡ºé‚
                       </p>

                       <button 
                         onClick={handleOpenRedPacket}
                         className="mt-12 w-20 h-20 bg-[#FFE699] text-[#D92C2C] rounded-full border-4 border-yellow-100 shadow-[0_0_20px_rgba(255,230,153,0.6)] flex items-center justify-center text-3xl font-black active:scale-95 transition-transform"
                       >
                         é–‹
                       </button>
                    </div>
                    
                    <div className="absolute bottom-4 text-white/30 text-xs">æ¯æ—¥ä¸€æ‘‡ Â· ä¸Šä¸Šå‰</div>
                 </div>
              </div>
            </div>
          );

          // 3. é®ç½©å¼¹çª— - ç»“æœè¯¦æƒ…
          const renderModalResult = () => {
            const isKoi = shakeResult.type === 'koi';
            const isBlessing = shakeResult.type === 'blessing';
            
            return (
              <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/85 backdrop-blur-sm animate-fade-in p-4">
                {isKoi && (
                  <div className="absolute inset-0 pointer-events-none overflow-hidden">
                     {FIREWORKS.map(fw => (
                       <div 
                         key={fw.id} 
                         className={`absolute w-2 h-2 rounded-full ${fw.color} animate-[ping_1s_ease-out_infinite]`}
                         style={{ left: fw.left, top: fw.top, animationDelay: fw.delay }}
                       ></div>
                     ))}
                  </div>
                )}

                <div className="w-full max-w-xs relative animate-scale-up">
                   <CloseButton onClick={handleCloseModal} />

                   <div className="bg-white rounded-2xl overflow-hidden shadow-2xl relative">
                      <div className={`h-2 w-full ${isKoi ? 'bg-gradient-to-r from-orange-400 to-red-500' : isBlessing ? 'bg-gradient-to-r from-indigo-400 to-blue-500' : 'bg-red-600'}`}></div>

                      <div className="p-5 text-center pb-2">
                         <h2 className={`text-2xl font-black tracking-wide ${isKoi ? 'text-orange-600' : isBlessing ? 'text-indigo-800' : 'text-gray-800'}`}>
                           {shakeResult.title}
                         </h2>
                         
                         {isKoi && (
                           <div className="absolute top-10 right-4 w-16 h-16 border-4 border-red-500 text-red-500 rounded-full flex items-center justify-center font-bold text-xs rotate-[-12deg] opacity-80 animate-pulse bg-white/80">
                              <div>
                                <div>å…¨å“ç±»</div>
                                <div>å…å•</div>
                              </div>
                           </div>
                         )}

                         {!isKoi && !isBlessing && shakeResult.hasRedPacket && (
                           <div className="mt-1 flex items-baseline justify-center text-red-500 gap-1">
                              <span className="text-sm">å·²å…¥è´¦</span>
                              <span className="text-3xl font-bold">{shakeResult.amount}</span>
                              <span className="text-sm">å…ƒ</span>
                           </div>
                         )}
                         
                         {isBlessing && (
                           <div className="mt-2 text-indigo-500 text-xs font-medium">
                              æ¥è‡ªç¤¾åŒºæœåŠ¡è€…çš„æš–å¿ƒç¥ç¦
                           </div>
                         )}
                      </div>

                      <div className="px-5 py-2">
                         <div className={`rounded-xl p-4 flex gap-3 border ${isBlessing ? 'bg-indigo-50 border-indigo-100' : 'bg-gray-50 border-gray-100'}`}>
                            <div className="flex-shrink-0 flex flex-col items-center">
                               <div className={`w-10 h-10 ${shakeResult.actorAvatarColor} rounded-full flex items-center justify-center text-white border border-white shadow-sm`}>
                                  {isBlessing && shakeResult.actorRole.includes('ä¿å®‰') ? <Shield className="w-5 h-5"/> : <User className="w-6 h-6" />}
                               </div>
                               <div className="text-[9px] text-gray-500 mt-1 font-bold">{shakeResult.actorName.split('Â·')[1]}</div>
                            </div>
                            <div className="relative">
                               <div className={`absolute top-3 -left-1.5 w-3 h-3 bg-white border-l border-b border-gray-200 transform rotate-45`}></div>
                               <div className="bg-white p-3 rounded-lg border border-gray-200 text-sm text-gray-700 leading-relaxed shadow-sm relative z-10 text-left">
                                  {shakeResult.speech}
                               </div>
                            </div>
                         </div>
                      </div>

                      <div className="p-5 pt-2 pb-6">
                         {isKoi ? (
                            <div className="space-y-2">
                              {shakeResult.buttons.map((btn, i) => (
                                <button
                                  key={i}
                                  onClick={() => handleResultAction(btn.action)}
                                  className={`w-full py-3 rounded-lg font-bold text-sm flex items-center justify-center gap-1
                                    ${btn.primary ? 'bg-orange-500 text-white shadow-lg shadow-orange-200' : 'bg-white border border-gray-200 text-gray-600'}
                                  `}
                                >
                                  {btn.text}
                                </button>
                              ))}
                            </div>
                         ) : (
                            <button
                              onClick={() => handleResultAction(shakeResult.buttons[0].action)}
                              className={`w-full py-3.5 rounded-lg font-bold text-base shadow-lg flex items-center justify-center gap-2 active:scale-95 transition-transform
                                ${isBlessing 
                                  ? 'bg-indigo-600 text-white shadow-indigo-200 hover:bg-indigo-700' 
                                  : 'bg-[#D92C2C] text-white shadow-red-100 hover:bg-[#b02020]'
                                }
                              `}
                            >
                              {shakeResult.buttons[0].text} 
                              {shakeResult.buttons[0].action === 'like' ? <ThumbsUp className="w-4 h-4" /> : <ChevronRight className="w-4 h-4" />}
                            </button>
                         )}
                      </div>
                   </div>
                </div>
              </div>
            );
          };

          // 4. é‡‘ç‰ŒæœåŠ¡è€…åˆ—è¡¨é¡µ (ä¼˜åŒ–å…³é—­æŒ‰é’® & ç‚¹å‡»è·³è½¬äºŒçº§é¡µ)
          const renderGoldList = () => {
            return (
               <div className="absolute inset-0 z-40 bg-gray-50 overflow-y-auto animate-fade-in flex flex-col">
                  <div className="bg-[#D92C2C] text-white p-4 pt-10 pb-6 shadow-md relative z-10">
                     <button onClick={() => setViewState('home')} className="absolute top-11 left-4 bg-white/20 p-1.5 rounded-full hover:bg-white/30">
                       <X className="w-5 h-5"/>
                     </button>
                     <h1 className="text-center font-bold text-lg flex items-center justify-center gap-2">
                       <Heart className="w-5 h-5 text-yellow-300 fill-current" />
                       é‚»é‡Œé«˜æ‰‹æ–°æ˜¥é€ç¥ç¦
                     </h1>
                     <p className="text-center text-xs text-red-200 mt-1">
                        {shakeResult && shakeResult.type === 'koi' ? 'é”¦é²¤å…å•ç”Ÿæ•ˆä¸­ Â· ä¸¥é€‰ä¼˜è´¨æœåŠ¡' : 'æ–°æ˜¥ç¦æ°”åˆ° Â· é‚»é‡Œäº’åŠ©æš–äººå¿ƒ'}
                     </p>
                  </div>
                  
                  <div className="flex-1 p-4 space-y-3 pb-20">
                     {GOLD_PROVIDERS.map(provider => (
                       <div key={provider.id} className="bg-white rounded-xl p-4 shadow-sm flex gap-4 items-center">
                          <img src={provider.avatarUrl} alt={provider.name} className="w-14 h-14 rounded-full object-cover border-2 border-gray-100 shadow-sm flex-shrink-0" />
                          <div className="flex-1">
                             <div className="flex justify-between items-start">
                                <div>
                                  <h3 className="font-bold text-gray-800">{provider.name} <span className="text-xs font-normal text-gray-500 bg-gray-100 px-1 rounded ml-1">{provider.role}</span></h3>
                                  <div className="flex items-center gap-1 mt-1">
                                     <div className="flex text-yellow-400">
                                       <Star className="w-3 h-3 fill-current" />
                                     </div>
                                     <span className="text-xs text-gray-500 font-bold">{provider.rating}</span>
                                     <span className="text-[10px] text-gray-400">({provider.reviews}å•)</span>
                                  </div>
                                </div>
                                {/* æ‰¾TAå¸®å¿™ -> è·³è½¬äºŒçº§ä¸»é¡µ */}
                                <button onClick={() => handleCardClick(provider)} className="bg-red-50 text-red-600 text-xs font-bold px-3 py-1.5 rounded-full border border-red-100 active:bg-red-100">
                                   æ‰¾TAå¸®å¿™
                                </button>
                             </div>
                             <div className="flex gap-2 mt-2 items-center flex-wrap">
                                {provider.skills.map((skill, i) => (
                                  <span key={i} className="text-[10px] text-gray-500 bg-gray-50 px-1.5 py-0.5 rounded border border-gray-100">
                                     {skill}
                                  </span>
                                ))}
                                
                                {provider.blessingsSent > 0 && (
                                  <span className="text-[10px] text-red-500 bg-red-50 px-1.5 py-0.5 rounded border border-red-100 flex items-center gap-1">
                                     <Heart className="w-3 h-3 fill-current" /> å·²é€ç¥ç¦ {provider.blessingsSent} æ¬¡
                                  </span>
                                )}
                             </div>
                          </div>
                       </div>
                     ))}
                     
                     <div className="text-center text-xs text-gray-400 mt-4">--- å·²ç»åˆ°åº•å•¦ ---</div>
                  </div>
               </div>
            );
          };

          // 5. ä¸ªäººä¸»é¡µæ¸²æŸ“ (äºŒçº§é¡µ)
          const renderProfile = () => {
             if (!shakeResult) return null;
             const { actorName, profileData, actorAvatarColor } = shakeResult;
             return (
               <div className="absolute inset-0 z-40 bg-gray-50 overflow-y-auto animate-fade-in flex flex-col bg-gray-50">
                  <div className="h-40 bg-gray-800 relative flex-shrink-0">
                     <button onClick={() => setViewState('home')} className="absolute top-4 left-4 bg-black/30 p-2 rounded-full text-white z-20">
                       <X className="w-5 h-5"/>
                     </button>
                     <div className="absolute bottom-0 w-full h-10 bg-gray-50 rounded-t-3xl"></div>
                  </div>
                  
                  <div className="px-6 -mt-16 relative z-10 flex-1">
                     <div className="flex justify-between items-end">
                        <div className={`w-20 h-20 ${actorAvatarColor} rounded-full border-4 border-white shadow-md flex items-center justify-center overflow-hidden bg-white`}>
                           {shakeResult.avatarUrl ? (
                               <img src={shakeResult.avatarUrl} alt={actorName} className="w-full h-full object-cover" />
                           ) : (
                               <User className="text-gray-300 w-10 h-10" />
                           )}
                        </div>
                        <button className="bg-red-50 text-red-500 px-3 py-1 rounded-full text-xs font-bold mb-2 flex items-center gap-1">
                           <Heart className="w-3 h-3 fill-current" /> å…³æ³¨
                        </button>
                     </div>
                     <h1 className="text-xl font-bold mt-2 text-gray-800">{actorName}</h1>
                     <p className="text-xs text-gray-500 mt-1">æœåŠ¡ç¤¾åŒºï¼š{profileData.distance} å†… | è¯„åˆ† 5.0</p>
                     
                     <div className="flex flex-wrap gap-2 mt-4">
                        {profileData.skills.map(s => (
                           <span key={s} className="px-2 py-1 bg-gray-200 text-gray-600 text-xs rounded">{s}</span>
                        ))}
                     </div>

                     {/* è¯„ä»· */}
                     <div className="mt-6 bg-white p-4 rounded-xl shadow-sm">
                        <div className="text-sm font-bold mb-2">æœ€æ–°è¯„ä»·</div>
                        <p className="text-xs text-gray-600 leading-relaxed">"{profileData.review}"</p>
                        <div className="flex text-yellow-400 mt-2"><Star className="w-3 h-3 fill-current"/><Star className="w-3 h-3 fill-current"/><Star className="w-3 h-3 fill-current"/><Star className="w-3 h-3 fill-current"/><Star className="w-3 h-3 fill-current"/></div>
                     </div>

                     {/* ä»ä¸šç»å† (æ–°) */}
                     <div className="mt-4 bg-white p-4 rounded-xl shadow-sm">
                        <div className="text-sm font-bold mb-2 flex items-center gap-2"><Briefcase className="w-4 h-4 text-gray-500"/>ä»ä¸šç»å†</div>
                        <p className="text-xs text-gray-600 leading-relaxed">
                           {profileData.experience || 'å¤šå¹´æ·±è€•ç¤¾åŒºï¼ŒæœåŠ¡åƒå®¶ä¸‡æˆ·ã€‚å§‹ç»ˆç§‰æŒâ€œå®¢æˆ·è‡³ä¸Šâ€çš„æœåŠ¡ç†å¿µï¼Œè‡´åŠ›äºä¸ºæ‚¨è§£å†³ç”Ÿæ´»ä¸­çš„å„ç§å°éº»çƒ¦ã€‚'}
                        </p>
                     </div>

                     {/* æœåŠ¡æ¡ˆä¾‹ (æ–° - å›¾åº“å ä½) */}
                     <div className="mt-4 bg-white p-4 rounded-xl shadow-sm mb-20">
                        <div className="text-sm font-bold mb-2 flex items-center gap-2"><ImageIcon className="w-4 h-4 text-gray-500"/>æœåŠ¡æ¡ˆä¾‹</div>
                        <div className="grid grid-cols-2 gap-2">
                           {profileData.cases && profileData.cases.map((c, i) => (
                              <div key={i} className="relative rounded-lg overflow-hidden aspect-video bg-gray-200">
                                 <img src={`https://picsum.photos/300/200?random=${i}`} alt="case" className="w-full h-full object-cover" />
                                 <div className="absolute bottom-0 w-full bg-black/50 text-white text-[10px] px-2 py-1 truncate">{c}</div>
                              </div>
                           ))}
                        </div>
                     </div>
                  </div>

                  {/* åº•éƒ¨æŒ‰é’®ç»„ (æ›´æ–°: åŒæŒ‰é’®) */}
                  <div className="fixed bottom-0 w-full p-4 bg-white border-t border-gray-100 flex gap-3 z-20 shadow-[0_-2px_10px_rgba(0,0,0,0.05)]">
                     <button 
                        className="flex-1 bg-gray-100 text-gray-700 font-bold py-3 rounded-lg flex items-center justify-center gap-2 hover:bg-gray-200 transition-colors"
                        onClick={() => showToast('å·²å‘èµ·å’¨è¯¢')}
                     >
                        <MessageCircle className="w-4 h-4" /> è”ç³»é—®é—®
                     </button>
                     <button 
                        className="flex-[1.5] bg-red-600 text-white font-bold py-3 rounded-lg shadow-lg shadow-red-200 flex items-center justify-center gap-2 hover:bg-red-700 active:scale-95 transition-transform"
                        onClick={() => showToast('è·³è½¬ä¸‹å•é¡µ')}
                     >
                        <ShoppingBag className="w-4 h-4" /> æ‰¾TAä¸‹å•
                     </button>
                  </div>
               </div>
             )
          };

          // 6. éšè—æƒŠå–œå¼¹çª— (æ–°)
          const renderSurpriseRedPacket = () => {
             if (!showSurprise) return null;
             return (
                <div className="fixed inset-0 z-[70] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-fade-in p-6">
                   <div className="w-full max-w-sm relative animate-scale-up">
                      <CloseButton onClick={() => setShowSurprise(false)} />
                      
                      <div className="bg-gradient-to-b from-red-500 to-red-700 rounded-3xl p-6 text-center shadow-2xl border-4 border-yellow-300 relative overflow-hidden">
                         {/* å…‰æ•ˆ */}
                         <div className="absolute top-0 left-1/2 -translate-x-1/2 w-full h-full bg-gradient-to-b from-yellow-400/20 to-transparent pointer-events-none"></div>
                         
                         <div className="relative z-10">
                            <h3 className="text-yellow-200 text-xl font-bold mb-2">ğŸ éšè—æƒŠå–œå·²è§¦å‘ï¼</h3>
                            <p className="text-white/90 text-sm mb-6">æ‚¨çš„å¥½å‹å·²æˆåŠŸæ³¨å†Œé¢†ç¦æ°”<br/>é€æ‚¨ä¸€ä¸ªå›é¦ˆçº¢åŒ…</p>
                            
                            <div className="bg-white/10 rounded-xl p-4 mb-6 backdrop-blur-sm border border-white/20">
                               <div className="text-4xl font-bold text-yellow-300 mb-1">0.18 <span className="text-lg">å…ƒ</span></div>
                               <div className="text-xs text-white/70">å·²å­˜å…¥æ‚¨çš„ä½™é¢</div>
                            </div>

                            <p className="text-white text-sm font-bold mb-4">â€œç‹¬ä¹ä¹ä¸å¦‚ä¼—ä¹ä¹â€</p>
                            
                            <button 
                               onClick={() => { setShowSurprise(false); setShowShareModal(true); }}
                               className="w-full bg-yellow-400 text-red-700 font-bold py-3 rounded-full shadow-lg hover:bg-yellow-300 active:scale-95 transition-transform"
                            >
                               ç»§ç»­ä¼ é€’å¥½è¿
                            </button>
                         </div>
                      </div>
                   </div>
                </div>
             )
          };

          const renderShareModal = () => {
            if (!showShareModal) return null;
            return (
              <div className="fixed inset-0 z-[60] bg-black/90 flex flex-col items-end p-8" onClick={handleCloseShareModal}>
                 <div className="text-white text-right space-y-2">
                    <h3 className="text-xl font-bold">ç‚¹å‡»å³ä¸Šè§’å‘é€ç»™æœ‹å‹</h3>
                    <p className="text-yellow-400 text-sm">å¥½å‹é¢†å–åï¼Œä½ å¾—å…å•åŠ é€Ÿå¡ï¼</p>
                 </div>
              </div>
            );
          };

          return (
            <div className="w-full h-screen mx-auto max-w-md shadow-2xl overflow-y-auto overflow-x-hidden font-sans text-gray-800 relative select-none scrollbar-hide">
              {renderHome()}
              {viewState === 'modal_redpacket' && renderModalRedPacket()}
              {viewState === 'modal_result' && renderModalResult()}
              {viewState === 'page_gold_list' && renderGoldList()}
              {viewState === 'page_profile' && renderProfile()}
              {renderShareModal()}
              {renderSurpriseRedPacket()}
              <Toast />
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<DailyShakeAppV2 />);
    </script>
</body>
</html>
